(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[335],{1382:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/contact",function(){return a(1468)}])},6877:function(e,t,a){"use strict";a.d(t,{Z:function(){return ChatGPTInterface}});var n=a(5893),r=a(7294);function MessageBubble(e){let{role:t,content:a}=e;return(0,n.jsxs)("div",{className:"message-bubble ".concat(t),style:{margin:"0.4rem 0"},children:[(0,n.jsxs)("strong",{style:{textTransform:"capitalize"},children:[t,":"]})," ",a]})}function ChatGPTInterface(e){let{isGlass:t=!1,maxTokens:a=2e3,presencePenalty:s=0,frequencyPenalty:i=0,temperature:o=.7,model:l="gpt-3.5-turbo"}=e,[d,c]=(0,r.useState)([]),[u,m]=(0,r.useState)(""),[p,x]=(0,r.useState)(!1),g=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[d]);let handleFileUpload=e=>{if(!e||!e[0])return;let t=e[0],a={role:"user",content:"File uploaded: ".concat(t.name," (size=").concat(t.size," bytes)")};c(e=>[...e,a])},handleSend=async()=>{if(!u.trim())return;let e={role:"user",content:u.trim()},t=[...d,e];c(t),m(""),x(!0);try{var n,r,p;let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:l,messages:t,temperature:o,max_tokens:a,presence_penalty:s,frequency_penalty:i})}),d=await e.json();if(!e.ok||(null==d?void 0:d.error)){console.error("[ChatGPTInterface] /api/chat error:",(null==d?void 0:d.error)||d),c(e=>[...e,{role:"assistant",content:"(APIエラー: "+JSON.stringify((null==d?void 0:d.error)||d)+")"}]),x(!1);return}let u=(null==d?void 0:null===(p=d.choices)||void 0===p?void 0:null===(r=p[0])||void 0===r?void 0:null===(n=r.message)||void 0===n?void 0:n.content)||"(no answer from AI)",m="",g=0,f=setInterval(()=>{g<u.length?(m+=u.charAt(g++),c(e=>{let t=e[e.length-1];return t&&"assistant"===t.role?[...e.slice(0,-1),{role:"assistant",content:m}]:[...e,{role:"assistant",content:m}]})):(clearInterval(f),x(!1))},20)}catch(e){console.error("Error calling /api/chat:",e),x(!1),c(e=>[...e,{role:"assistant",content:"(通信エラーが発生しました)"}])}},f={margin:"0 auto",width:"90%",maxWidth:"600px",height:"70vh",display:"flex",flexDirection:"column",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.3)",boxShadow:"0 0 10px rgba(0,0,0,0.5)",color:"#fff",position:"relative",zIndex:10,overflow:"hidden",...t?{background:"transparent"}:{background:"rgba(0,0,0,0.4)"}};return(0,n.jsxs)("div",{style:f,children:[(0,n.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:[d.map((e,t)=>(0,n.jsx)(MessageBubble,{role:e.role,content:e.content},t)),(0,n.jsx)("div",{ref:g})]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem",padding:"0.75rem",borderTop:"1px solid rgba(255,255,255,0.3)",background:t?"transparent":"rgba(0,0,0,0.6)"},children:[(0,n.jsx)("div",{style:{marginBottom:"0.5rem"},children:(0,n.jsx)("input",{type:"file",onChange:e=>handleFileUpload(e.target.files),style:{color:"#fff",background:"transparent"}})}),(0,n.jsx)("textarea",{style:{resize:"none",border:t?"1px solid rgba(255,255,255,0.4)":"1px solid #444",borderRadius:"4px",padding:"0.75rem",fontSize:"0.95rem",fontFamily:"sans-serif",background:t?"transparent":"#222",color:"#fff",width:"100%",marginBottom:"0.5rem"},placeholder:"Type your message...",value:u,onChange:e=>m(e.target.value),disabled:p}),(0,n.jsx)("button",{style:{background:"#31a37d",color:"#fff",border:"none",borderRadius:"4px",padding:"0.6rem 1.2rem",fontSize:"1rem",cursor:"pointer",alignSelf:"flex-end"},onClick:handleSend,disabled:p||!u.trim(),children:p?"...":"Send"})]})]})}},1468:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Contact}});var n=a(5893),r=a(9008),s=a.n(r),i=a(7294),o=a(4298),l=a.n(o),d=a(6877);function Contact(){return(0,i.useEffect)(()=>{console.log("[Contact page] mounted on client side.")},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s(),{children:[(0,n.jsx)("title",{children:"Contact - GPT3.5 Test with Fallback"}),(0,n.jsx)("meta",{name:"description",content:"Contact page with GPT-3.5 chat (fallback for insufficient_quota)."}),(0,n.jsx)("meta",{charSet:"UTF-8"})]}),(0,n.jsxs)("div",{id:"contact-bg-wrapper",style:{position:"relative",minHeight:"100vh"},children:[(0,n.jsx)("canvas",{id:"galaxy-art-canvas",style:{position:"absolute"}}),(0,n.jsx)("canvas",{id:"rotating-galaxies-canvas",style:{position:"absolute"}}),(0,n.jsx)("canvas",{id:"art-stars-canvas",style:{position:"absolute"}}),(0,n.jsx)("canvas",{id:"art-nebula-canvas",style:{position:"absolute"}}),(0,n.jsxs)("div",{style:{position:"relative",zIndex:2,padding:"40px 20px",maxWidth:"800px",margin:"0 auto"},children:[(0,n.jsx)("h1",{children:"Contact Us"}),(0,n.jsx)("p",{children:"お問い合わせ内容があれば以下フォームより送信してください。"}),(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),alert("送信（サンプル）")},style:{background:"rgba(0,0,0,0.3)",padding:"20px",borderRadius:"8px",marginTop:"20px",marginBottom:"40px"},children:[(0,n.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("label",{htmlFor:"name",style:{display:"block",marginBottom:"0.3rem"},children:"お名前"}),(0,n.jsx)("input",{id:"name",name:"name",type:"text",style:{width:"100%",padding:"8px"},required:!0})]}),(0,n.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("label",{htmlFor:"email",style:{display:"block",marginBottom:"0.3rem"},children:"メールアドレス"}),(0,n.jsx)("input",{id:"email",name:"email",type:"email",style:{width:"100%",padding:"8px"},required:!0})]}),(0,n.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,n.jsx)("label",{htmlFor:"message",style:{display:"block",marginBottom:"0.3rem"},children:"お問い合わせ内容"}),(0,n.jsx)("textarea",{id:"message",name:"message",rows:5,style:{width:"100%",padding:"8px"},required:!0})]}),(0,n.jsx)("button",{type:"submit",style:{padding:"0.6rem 1.2rem",background:"#0066cc",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer"},children:"送信"})]}),(0,n.jsx)(d.Z,{isGlass:!0,maxTokens:1600,temperature:.7,presencePenalty:0,frequencyPenalty:0})]})]}),(0,n.jsx)(l(),{src:"/js/galaxyArtSim.js",strategy:"afterInteractive",onLoad:()=>{var e,t;null===(e=(t=window).startGalaxyArtSim)||void 0===e||e.call(t)}}),(0,n.jsx)(l(),{src:"/js/rotatingGalaxies.js",strategy:"afterInteractive",onLoad:()=>{var e,t;null===(e=(t=window).startRotatingGalaxies)||void 0===e||e.call(t)}}),(0,n.jsx)(l(),{src:"/js/artStars.js",strategy:"afterInteractive",onLoad:()=>{var e,t;null===(e=(t=window).startArtStars)||void 0===e||e.call(t)}}),(0,n.jsx)(l(),{src:"/js/artNeula.js",strategy:"afterInteractive",onLoad:()=>{var e,t;null===(e=(t=window).startArtNebula)||void 0===e||e.call(t)}})]})}},4298:function(e,t,a){e.exports=a(5354)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=1382)}),_N_E=e.O()}]);